import{d as dedent,E as EditorView,a as EditorState,b as basicSetup,j as javascript,V as ViewPlugin}from"./vendor.b8aaaf06.js";const p=function(){const relList=document.createElement("link").relList;if(!(relList&&relList.supports&&relList.supports("modulepreload"))){for(const link of document.querySelectorAll('link[rel="modulepreload"]'))processPreload(link);new MutationObserver((mutations=>{for(const mutation of mutations)if("childList"===mutation.type)for(const node of mutation.addedNodes)"LINK"===node.tagName&&"modulepreload"===node.rel&&processPreload(node)})).observe(document,{childList:!0,subtree:!0})}function processPreload(link){if(link.ep)return;link.ep=!0;const fetchOpts=function(script){const fetchOpts={};return script.integrity&&(fetchOpts.integrity=script.integrity),script.referrerpolicy&&(fetchOpts.referrerPolicy=script.referrerpolicy),"use-credentials"===script.crossorigin?fetchOpts.credentials="include":"anonymous"===script.crossorigin?fetchOpts.credentials="omit":fetchOpts.credentials="same-origin",fetchOpts}(link);fetch(link.href,fetchOpts)}};p();var style="";const VOID_ELEMENTS={area:!0,base:!0,br:!0,col:!0,command:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0},TAG_NAMES=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","head","header","hgroup","h1","h2","h3","h4","h5","h6","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","svg","table","tbody","td","template","textarea","tfoot","th","thead","time","title","tr","track","u","ul","video","wbr"],KEBAB_REGEX=/[A-Z\u00C0-\u00D6\u00D8-\u00DE]/g,replacer=match=>"-"+match.toLowerCase(),kebabCase=str=>str.replace(KEBAB_REGEX,replacer);function createTag(name,isVoid){return function(a0){let a,attr;if(a0&&"object"==typeof a0&&"function"!=typeof a0.then&&!Array.isArray(a0)){for(a in a0)attr||(attr=[]),attr.push(` ${a}="${a0[a]}"`);return attr.push(">"),arguments[0]=attr,isVoid?[`<${name}`,attr]:["html"===name?"<!DOCTYPE html><html":`<${name}`,arguments,`</${name}>`]}return isVoid?`<${name}>`:["html"===name?"<!DOCTYPE html><html>":`<${name}>`,arguments,`</${name}>`]}}const _$1=TAG_NAMES.reduce(((o,name)=>(o[name]=createTag(name,VOID_ELEMENTS[name]),o)),Object.create({}));function traverse$1(arr,ctx={}){let i,value,queue_a=[arr=Array.isArray(arr)?arr:[arr]],queue_i=[0],dedupes=Object.create(null);return function next(replaceValue){var _a;if(arguments.length?value=replaceValue:(i=queue_i[0],value=null!=(_a=queue_a[0][i])&&_a,queue_i[0]=i+1,"function"==typeof value&&(value=value(ctx))),"object"==typeof value&&void 0!==value.length){if(value._DEDUPE_){if(dedupes[value._DEDUPE_])return next();dedupes[value._DEDUPE_]=!0}return queue_a.unshift(value),queue_i.unshift(0),next()}return!1!==value?value.then||"string"==typeof value?value:String(value):queue_i[0]>=queue_a[0].length?(queue_a.shift(),queue_i.shift(),queue_a&&queue_a.length?next():(arr=null,value=null,queue_a=null,queue_i=null,void(dedupes=null))):next()}}function toStream$1(res,arr,ctx){const next=traverse$1(arr,ctx);async function loop(){let frag=next();for(;void 0!==frag;){if(frag.then&&(frag=next(await frag)),!res.write(frag))return;frag=next()}return res.end()}loop(),res.on("drain",loop),res.on("end",(()=>{arr=null}))}function dedupe$1(v,id){return v._DEDUPE_=id,v}function css$1(chunks,a,arg,d){for(chunks=[],a=0;a<arguments.length;a++)if(arg=arguments[a],0===a)chunks.push(`${Array.isArray(arg)?arg.join(","):arg}{`);else for(d in arg)chunks.push(`${kebabCase(d)}:${arg[d]};`);return chunks.push("}"),chunks}function mediaQuery$1(chunks,a,arg){for(chunks=[],a=0;a<arguments.length;a++)arg=arguments[a],0===a?chunks.push(`@media ${arg} {`):chunks.push(arg);return chunks.push("}"),chunks}var genz=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",createTag:createTag,_:_$1,traverse:traverse$1,toStream:toStream$1,dedupe:dedupe$1,css:css$1,mediaQuery:mediaQuery$1});const{_:_,css:css,traverse:traverse,mediaQuery:mediaQuery,dedupe:dedupe,toStream:toStream}=genz;console.log({_:_,css:css,traverse:traverse,mediaQuery:mediaQuery,dedupe:dedupe,toStream:toStream});const editor=document.getElementById("editor"),errors=document.getElementById("errors"),preview=document.getElementById("preview");let initial;try{window.location.hash.length>1&&(initial=window.atob(window.location.hash.slice(1)))}catch(e){}initial=initial||dedent("\n_.html(\n  _.head(\n    _.title('Basic Example'),\n    _.style(css('body', {\n      backgroundColor: 'salmon'\n    }))\n  ),\n  _.body(\n    _.h1('Hello World'),\n    _.p('This is a basic example.')\n  )\n)\n");const updatePreview=async txt=>{try{const tree=eval(txt),html=await new Promise(((resolve,reject)=>{const chunks=[];toStream({write:c=>(chunks.push(c),!0),end(){resolve(chunks.join(""))},on(){}},tree),errors.classList.remove("show")}));preview.src=`data:text/html;charset=utf-8,${window.escape(html)}`,window.location.hash=btoa(txt)}catch(e){window.location.hash="",errors.classList.add("show"),errors.innerText=e.message}};updatePreview(initial),new EditorView({parent:editor,state:EditorState.create({doc:initial,extensions:[basicSetup,javascript(),ViewPlugin.fromClass(class{constructor(view){}update(update){update.docChanged&&updatePreview(update.state.doc.toString())}})]})});
