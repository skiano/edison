import{d as dedent,E as EditorView,a as EditorState,b as basicSetup,j as javascript,V as ViewPlugin}from"./vendor.b8aaaf06.js";const p=function(){const i=document.createElement("link").relList;if(i&&i.supports&&i.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))e(r);new MutationObserver(r=>{for(const n of r)if(n.type==="childList")for(const s of n.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&e(s)}).observe(document,{childList:!0,subtree:!0});function o(r){const n={};return r.integrity&&(n.integrity=r.integrity),r.referrerpolicy&&(n.referrerPolicy=r.referrerpolicy),r.crossorigin==="use-credentials"?n.credentials="include":r.crossorigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function e(r){if(r.ep)return;r.ep=!0;const n=o(r);fetch(r.href,n)}};p();var style="";const VOID_ELEMENTS={area:!0,base:!0,br:!0,col:!0,command:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0},TAG_NAMES=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","head","header","hgroup","h1","h2","h3","h4","h5","h6","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","svg","table","tbody","td","template","textarea","tfoot","th","thead","time","title","tr","track","u","ul","video","wbr"];function createTag(t,i){return function(e){let r,n;if(e&&typeof e=="object"&&typeof e.then!="function"&&!Array.isArray(e)){for(r in e)n||(n=[]),n.push(` ${r}="${e[r]}"`);return n.push(">"),arguments[0]=n,i?[`<${t}`,n]:[t==="html"?"<!DOCTYPE html><html":`<${t}`,arguments,`</${t}>`]}return i?`<${t}>`:[t==="html"?"<!DOCTYPE html><html>":`<${t}>`,arguments,`</${t}>`]}}TAG_NAMES.reduce((t,i)=>(t[i]=createTag(i,VOID_ELEMENTS[i]),t),Object.create({}));function traverse(t,i={}){t=Array.isArray(t)?t:[t];let o,e,r=[t],n=[0],s=Object.create(null);return function u(a){var l;if(arguments.length?e=a:(o=n[0],e=(l=r[0][o])!=null?l:!1,n[0]=o+1,typeof e=="function"&&(e=e(i))),typeof e=="object"&&typeof e.length!="undefined"){if(e._DEDUPE_){if(s[e._DEDUPE_])return u();s[e._DEDUPE_]=!0}return r.unshift(e),n.unshift(0),u()}else{if(e!==!1)return e.then||typeof e=="string"?e:String(e);if(n[0]>=r[0].length){if(r.shift(),n.shift(),!(r&&r.length)){t=null,e=null,r=null,n=null,s=null;return}return u()}else return u()}}}function toStream(t,i,o){const e=traverse(i,o);async function r(){let n=e();for(;typeof n!="undefined";)if(n.then&&(n=e(await n)),t.write(n))n=e();else return;return t.end()}r(),t.on("drain",r),t.on("end",()=>{i=null})}const editor=document.getElementById("editor"),errors=document.getElementById("errors"),preview=document.getElementById("preview"),initial=dedent(`
_.html(
  _.head(
    _.title('Basic Example'),
    _.style(css('body', {
      backgroundColor: 'limegreen'
    }))
  ),
  _.body(
    _.h1('Hello World'),
    _.p('This is a basic example.')
  )
)
`),updatePreview=async txt=>{try{const tree=eval(txt),html=await new Promise((t,i)=>{const o=[];toStream({write(r){return o.push(r),!0},end(){t(o.join(""))},on(){}},tree),errors.classList.remove("show")});preview.src=`data:text/html;charset=utf-8,${window.escape(html)}`}catch(t){errors.classList.add("show"),errors.innerText=t.message}};updatePreview(initial);new EditorView({parent:editor,state:EditorState.create({doc:initial,extensions:[basicSetup,javascript(),ViewPlugin.fromClass(class{constructor(t){}update(t){t.docChanged&&updatePreview(t.state.doc.toString())}})]})});
